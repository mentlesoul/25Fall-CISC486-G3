# CISC486 – Mini Tower Defense Demo (README)

> Unity 6 (6000.x). Scene: `Assets/MyScenes/Game demo.unity`

---

## AI Plan & FSM

**Flow:** `Spawn → Repath ↔ Move → { Goal | Dead }`

### States

#### Spawn
- Initialize unit (HP, speed, drops).
- Subscribe to **GridVersion** changes.
- **Transition:** → **Repath** after the initialization freeze window (see `initFreezeSeconds`).

#### Repath
- Compute path with **A\*** (Manhattan heuristic + small turn cost; cached).
- **On success:** → **Move**  
- **On failure:** retry after a short delay (server/placement rules prevent permanent no-path).

#### Move
- Follow waypoints with speed/acceleration limits, corner smoothing, and light separation.
- **If grid/tower changes:** → **Repath**

#### Goal
- **Regular enemies:** apply Hearts damage; then despawn.  
- **Supply convoy (if present):** counts as *Escaped*; apply a stacking buff to future waves; then despawn.

#### Dead / Despawn
- **HP ≤ 0:** play death FX and drops (convoy has no Hearts damage; drops per design); then despawn.

### Transitions

- **Spawn → Repath:** after init freeze completes on unit creation.  
- **Repath → Move:** when a valid path is obtained.  
- **Move ↔ Repath:** any of:
  - **GridVersion++** (place/sell/upgrade towers),
  - Next cell becomes unwalkable/occupied,
  - Current path invalid or timed out.  
  *Debounce with ~100–200 ms jitter and a per-frame replan cap.*
- **Move → Goal:** center enters EndPoint trigger (or within goal radius as fallback).  
- **Move → Dead:** HP ≤ 0.

---

## 1) Overview

A compact 3D scene with a Player, an enemy NPC controlled by a finite state machine, a tile grid, and A* pathfinding. The enemy spawns, plans a path across the grid, walks the path, and either reaches the EndPoint or dies. Each state is clearly visible through behavior and a floating label above the enemy.

---

## 2) How to Run

1. Open the project in Unity 6 and load `Game demo.unity`.
2. Press **Play**. You will see the full cycle: Initialization → Pathfinding → Following path → Goal/Dead. And a small robot tower for Player control character. Use the mouse to move the perspective and wasd to move the position.

---

## 3) Controls (optional)

- **W/A/S/D**: walk the player (if a controller is present)  
- **Mouse**: look around  
- **Left Shift**: press to move faster  

---